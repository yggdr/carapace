<!DOCTYPE HTML>
<html lang="en" class="latte" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>carapace</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="A multi-shell completion library. Supports Bash, Elvish, Fish, Nushell, Oil, Powershell, Xonsh and Zsh.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="asciinema/asciinema-player.css">
        <link rel="stylesheet" href="./theme/catppuccin.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "mocha" : "latte";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('latte')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="carapace.html"><strong aria-hidden="true">1.</strong> carapace</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/gen.html"><strong aria-hidden="true">1.1.</strong> Gen</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/gen/dashAnyCompletion.html"><strong aria-hidden="true">1.1.1.</strong> DashAnyCompletion</a></li><li class="chapter-item "><a href="carapace/gen/dashCompletion.html"><strong aria-hidden="true">1.1.2.</strong> DashCompletion</a></li><li class="chapter-item "><a href="carapace/gen/flagCompletion.html"><strong aria-hidden="true">1.1.3.</strong> FlagCompletion</a></li><li class="chapter-item "><a href="carapace/gen/positionalAnyCompletion.html"><strong aria-hidden="true">1.1.4.</strong> PositionalAnyCompletion</a></li><li class="chapter-item "><a href="carapace/gen/positionalCompletion.html"><strong aria-hidden="true">1.1.5.</strong> PositionalCompletion</a></li><li class="chapter-item "><a href="carapace/gen/preInvoke.html"><strong aria-hidden="true">1.1.6.</strong> PreInvoke</a></li><li class="chapter-item "><a href="carapace/gen/preRun.html"><strong aria-hidden="true">1.1.7.</strong> PreRun</a></li><li class="chapter-item "><a href="carapace/gen/snippet.html"><strong aria-hidden="true">1.1.8.</strong> Snippet</a></li><li class="chapter-item "><a href="carapace/gen/standalone.html"><strong aria-hidden="true">1.1.9.</strong> Standalone</a></li></ol></li><li class="chapter-item "><a href="carapace/action.html"><strong aria-hidden="true">1.2.</strong> Action</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/action/cache.html"><strong aria-hidden="true">1.2.1.</strong> Cache</a></li><li class="chapter-item "><a href="carapace/action/chdir.html"><strong aria-hidden="true">1.2.2.</strong> Chdir</a></li><li class="chapter-item "><a href="carapace/action/chdirF.html"><strong aria-hidden="true">1.2.3.</strong> ChdirF</a></li><li class="chapter-item "><a href="carapace/action/filter.html"><strong aria-hidden="true">1.2.4.</strong> Filter</a></li><li class="chapter-item "><a href="carapace/action/filterArgs.html"><strong aria-hidden="true">1.2.5.</strong> FilterArgs</a></li><li class="chapter-item "><a href="carapace/action/filterParts.html"><strong aria-hidden="true">1.2.6.</strong> FilterParts</a></li><li class="chapter-item "><a href="carapace/action/invoke.html"><strong aria-hidden="true">1.2.7.</strong> Invoke</a></li><li class="chapter-item "><a href="carapace/action/list.html"><strong aria-hidden="true">1.2.8.</strong> List</a></li><li class="chapter-item "><a href="carapace/action/multiParts.html"><strong aria-hidden="true">1.2.9.</strong> MultiParts</a></li><li class="chapter-item "><a href="carapace/action/multiPartsP.html"><strong aria-hidden="true">1.2.10.</strong> MultiPartsP</a></li><li class="chapter-item "><a href="carapace/action/noSpace.html"><strong aria-hidden="true">1.2.11.</strong> NoSpace</a></li><li class="chapter-item "><a href="carapace/action/prefix.html"><strong aria-hidden="true">1.2.12.</strong> Prefix</a></li><li class="chapter-item "><a href="carapace/action/retain.html"><strong aria-hidden="true">1.2.13.</strong> Retain</a></li><li class="chapter-item "><a href="carapace/action/shift.html"><strong aria-hidden="true">1.2.14.</strong> Shift</a></li><li class="chapter-item "><a href="carapace/action/split.html"><strong aria-hidden="true">1.2.15.</strong> Split</a></li><li class="chapter-item "><a href="carapace/action/splitP.html"><strong aria-hidden="true">1.2.16.</strong> SplitP</a></li><li class="chapter-item "><a href="carapace/action/style.html"><strong aria-hidden="true">1.2.17.</strong> Style</a></li><li class="chapter-item "><a href="carapace/action/styleF.html"><strong aria-hidden="true">1.2.18.</strong> StyleF</a></li><li class="chapter-item "><a href="carapace/action/styleR.html"><strong aria-hidden="true">1.2.19.</strong> StyleR</a></li><li class="chapter-item "><a href="carapace/action/suffix.html"><strong aria-hidden="true">1.2.20.</strong> Suffix</a></li><li class="chapter-item "><a href="carapace/action/suppress.html"><strong aria-hidden="true">1.2.21.</strong> Suppress</a></li><li class="chapter-item "><a href="carapace/action/tag.html"><strong aria-hidden="true">1.2.22.</strong> Tag</a></li><li class="chapter-item "><a href="carapace/action/tagF.html"><strong aria-hidden="true">1.2.23.</strong> TagF</a></li><li class="chapter-item "><a href="carapace/action/timeout.html"><strong aria-hidden="true">1.2.24.</strong> Timeout</a></li><li class="chapter-item "><a href="carapace/action/uniqueList.html"><strong aria-hidden="true">1.2.25.</strong> UniqueList</a></li><li class="chapter-item "><a href="carapace/action/uniqueListF.html"><strong aria-hidden="true">1.2.26.</strong> UniqueListF</a></li><li class="chapter-item "><a href="carapace/action/unless.html"><strong aria-hidden="true">1.2.27.</strong> Unless</a></li><li class="chapter-item "><a href="carapace/action/usage.html"><strong aria-hidden="true">1.2.28.</strong> Usage</a></li><li class="chapter-item "><a href="carapace/action/usageF.html"><strong aria-hidden="true">1.2.29.</strong> UsageF</a></li></ol></li><li class="chapter-item "><a href="carapace/invokedAction.html"><strong aria-hidden="true">1.3.</strong> InvokedAction</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/invokedAction/filter.html"><strong aria-hidden="true">1.3.1.</strong> Filter</a></li><li class="chapter-item "><a href="carapace/invokedAction/merge.html"><strong aria-hidden="true">1.3.2.</strong> Merge</a></li><li class="chapter-item "><a href="carapace/invokedAction/prefix.html"><strong aria-hidden="true">1.3.3.</strong> Prefix</a></li><li class="chapter-item "><a href="carapace/invokedAction/retain.html"><strong aria-hidden="true">1.3.4.</strong> Retain</a></li><li class="chapter-item "><a href="carapace/invokedAction/suffix.html"><strong aria-hidden="true">1.3.5.</strong> Suffix</a></li><li class="chapter-item "><a href="carapace/invokedAction/toA.html"><strong aria-hidden="true">1.3.6.</strong> ToA</a></li><li class="chapter-item "><a href="carapace/invokedAction/toMultiPartsA.html"><strong aria-hidden="true">1.3.7.</strong> ToMultiPartsA</a></li></ol></li><li class="chapter-item "><a href="carapace/defaultActions.html"><strong aria-hidden="true">1.4.</strong> DefaultActions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/defaultActions/actionCallback.html"><strong aria-hidden="true">1.4.1.</strong> ActionCallback</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionCobra.html"><strong aria-hidden="true">1.4.2.</strong> ActionCobra</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionCommands.html"><strong aria-hidden="true">1.4.3.</strong> ActionCommands</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionDirectories.html"><strong aria-hidden="true">1.4.4.</strong> ActionDirectories</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionExecCommand.html"><strong aria-hidden="true">1.4.5.</strong> ActionExecCommand</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionExecCommandE.html"><strong aria-hidden="true">1.4.6.</strong> ActionExecCommandE</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionExecutables.html"><strong aria-hidden="true">1.4.7.</strong> ActionExecutables</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionExecute.html"><strong aria-hidden="true">1.4.8.</strong> ActionExecute</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionFiles.html"><strong aria-hidden="true">1.4.9.</strong> ActionFiles</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionImport.html"><strong aria-hidden="true">1.4.10.</strong> ActionImport</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionMessage.html"><strong aria-hidden="true">1.4.11.</strong> ActionMessage</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionMultiParts.html"><strong aria-hidden="true">1.4.12.</strong> ActionMultiParts</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionMultiPartsN.html"><strong aria-hidden="true">1.4.13.</strong> ActionMultiPartsN</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionPositional.html"><strong aria-hidden="true">1.4.14.</strong> ActionPositional</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionStyleConfig.html"><strong aria-hidden="true">1.4.15.</strong> ActionStyleConfig</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionStyledValues.html"><strong aria-hidden="true">1.4.16.</strong> ActionStyledValues</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionStyledValuesDescribed.html"><strong aria-hidden="true">1.4.17.</strong> ActionStyledValuesDescribed</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionStyles.html"><strong aria-hidden="true">1.4.18.</strong> ActionStyles</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionValues.html"><strong aria-hidden="true">1.4.19.</strong> ActionValues</a></li><li class="chapter-item "><a href="carapace/defaultActions/actionValuesDescribed.html"><strong aria-hidden="true">1.4.20.</strong> ActionValuesDescribed</a></li></ol></li><li class="chapter-item "><a href="carapace/customActions.html"><strong aria-hidden="true">1.5.</strong> CustomActions</a></li><li class="chapter-item "><a href="carapace/context.html"><strong aria-hidden="true">1.6.</strong> Context</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/context/abs.html"><strong aria-hidden="true">1.6.1.</strong> Abs</a></li><li class="chapter-item "><a href="carapace/context/command.html"><strong aria-hidden="true">1.6.2.</strong> Command</a></li><li class="chapter-item "><a href="carapace/context/envSubst.html"><strong aria-hidden="true">1.6.3.</strong> Envsubst</a></li><li class="chapter-item "><a href="carapace/context/getEnv.html"><strong aria-hidden="true">1.6.4.</strong> GetEnv</a></li><li class="chapter-item "><a href="carapace/context/lookupEnv.html"><strong aria-hidden="true">1.6.5.</strong> LookupEnv</a></li><li class="chapter-item "><a href="carapace/context/setEnv.html"><strong aria-hidden="true">1.6.6.</strong> SetEnv</a></li></ol></li><li class="chapter-item "><a href="carapace/batch.html"><strong aria-hidden="true">1.7.</strong> Batch</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/batch/invoke.html"><strong aria-hidden="true">1.7.1.</strong> Invoke</a></li><li class="chapter-item "><a href="carapace/batch/ToA.html"><strong aria-hidden="true">1.7.2.</strong> ToA</a></li></ol></li><li class="chapter-item "><a href="carapace/invokedBatch.html"><strong aria-hidden="true">1.8.</strong> InvokedBatch</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/invokedBatch/merge.html"><strong aria-hidden="true">1.8.1.</strong> Merge</a></li></ol></li><li class="chapter-item "><a href="carapace/export.html"><strong aria-hidden="true">1.9.</strong> Export</a></li><li class="chapter-item "><a href="carapace/command.html"><strong aria-hidden="true">1.10.</strong> Command</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/command/group.html"><strong aria-hidden="true">1.10.1.</strong> Group</a></li></ol></li><li class="chapter-item "><a href="carapace/standalone.html"><strong aria-hidden="true">1.11.</strong> Standalone</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/standalone/carapace-parse.html"><strong aria-hidden="true">1.11.1.</strong> carapace-parse</a></li><li class="chapter-item "><a href="carapace/standalone/pflag.html"><strong aria-hidden="true">1.11.2.</strong> pflag</a></li></ol></li><li class="chapter-item "><a href="carapace/sandbox.html"><strong aria-hidden="true">1.12.</strong> Sandbox</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/clearCache.html"><strong aria-hidden="true">1.12.1.</strong> ClearCache</a></li><li class="chapter-item "><a href="carapace/keep.html"><strong aria-hidden="true">1.12.2.</strong> Env</a></li><li class="chapter-item "><a href="carapace/files.html"><strong aria-hidden="true">1.12.3.</strong> Files</a></li><li class="chapter-item "><a href="carapace/keep.html"><strong aria-hidden="true">1.12.4.</strong> Keep</a></li><li class="chapter-item "><a href="carapace/newContext.html"><strong aria-hidden="true">1.12.5.</strong> NewContext</a></li><li class="chapter-item "><a href="carapace/reply.html"><strong aria-hidden="true">1.12.6.</strong> Reply</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/reply/with.html"><strong aria-hidden="true">1.12.6.1.</strong> With</a></li></ol></li><li class="chapter-item "><a href="carapace/run.html"><strong aria-hidden="true">1.12.7.</strong> Run</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="carapace/expect.html"><strong aria-hidden="true">1.12.7.1.</strong> Expect</a></li><li class="chapter-item "><a href="carapace/expectNot.html"><strong aria-hidden="true">1.12.7.2.</strong> ExpectNot</a></li><li class="chapter-item "><a href="carapace/output.html"><strong aria-hidden="true">1.12.7.3.</strong> Output</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><a href="development.html"><strong aria-hidden="true">2.</strong> development</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="development/additionalInformation.html"><strong aria-hidden="true">2.1.</strong> Additional Information</a></li><li class="chapter-item "><a href="development/shells.html"><strong aria-hidden="true">2.2.</strong> Shells</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="development/shells/bash.html"><strong aria-hidden="true">2.2.1.</strong> Bash</a></li><li class="chapter-item "><a href="development/shells/elvish.html"><strong aria-hidden="true">2.2.2.</strong> Elvish</a></li><li class="chapter-item "><a href="development/shells/fish.html"><strong aria-hidden="true">2.2.3.</strong> Fish</a></li><li class="chapter-item "><a href="development/shells/ion.html"><strong aria-hidden="true">2.2.4.</strong> Ion</a></li><li class="chapter-item "><a href="development/shells/nushell.html"><strong aria-hidden="true">2.2.5.</strong> Nushell</a></li><li class="chapter-item "><a href="development/shells/oil.html"><strong aria-hidden="true">2.2.6.</strong> Oil</a></li><li class="chapter-item "><a href="development/shells/powershell.html"><strong aria-hidden="true">2.2.7.</strong> Powershell</a></li><li class="chapter-item "><a href="development/shells/tcsh.html"><strong aria-hidden="true">2.2.8.</strong> Tcsh</a></li><li class="chapter-item "><a href="development/shells/xonsh.html"><strong aria-hidden="true">2.2.9.</strong> Xonsh</a></li><li class="chapter-item "><a href="development/shells/zsh.html"><strong aria-hidden="true">2.2.10.</strong> Zsh</a></li></ol></li><li class="chapter-item "><a href="development/testing.html"><strong aria-hidden="true">2.3.</strong> Testing</a></li><li class="chapter-item "><a href="development/asciinema.html"><strong aria-hidden="true">2.4.</strong> Asciinema</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frappé</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">carapace</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/carapace-sh/carapace" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="carapace"><a class="header" href="#carapace">carapace</a></h1>
<p><a href="https://github.com/carapace-sh/carapace">carapace</a> is a command-line completion generator for <a href="https://github.com/spf13/cobra">spf13/cobra</a> with support for:</p>
<ul>
<li><a href="https://www.gnu.org/software/bash/">Bash</a></li>
<li><a href="https://elv.sh/">Elvish</a></li>
<li><a href="https://fishshell.com/">Fish</a></li>
<li><a href="https://doc.redox-os.org/ion-manual/">Ion</a> (<a href="https://github.com/carapace-sh/carapace/issues/88">experimental</a>)</li>
<li><a href="https://www.nushell.sh/">Nushell</a></li>
<li><a href="http://www.oilshell.org/">Oil</a></li>
<li><a href="https://microsoft.com/powershell">Powershell</a></li>
<li><a href="https://xon.sh/">Xonsh</a></li>
<li><a href="https://www.zsh.org/">Zsh</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gen"><a class="header" href="#gen">Gen</a></h1>
<p>Calling <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Gen"><code>Gen</code></a> on the root command is sufficient to enable completion script generation using the <a href="carapace/gen.html#hidden-subcommand">Hidden Subcommand</a>.</p>
<pre><code class="language-go">import (
    "github.com/carapace-sh/carapace"
)

carapace.Gen(rootCmd)
</code></pre>
<p>Additionally invoke <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Test"><code>carapace.Test</code></a> in a <a href="https://golang.org/doc/tutorial/add-a-test">test</a> to verify configuration during build time.</p>
<pre><code class="language-go">func TestCarapace(t *testing.T) {
    carapace.Test(t)
}
</code></pre>
<h2 id="hidden-subcommand"><a class="header" href="#hidden-subcommand">Hidden Subcommand</a></h2>
<p>When <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Gen"><code>Gen</code></a> is invoked a hidden subcommand (<code>_carapace</code>) is added. This handles completion script generation and <a href="carapace/./defaultActions/actionCallback.html">callbacks</a>.</p>
<h3 id="completion"><a class="header" href="#completion">Completion</a></h3>
<p><code>SHELL</code> is optional and will be detected by parent process name.</p>
<pre><code class="language-sh">command _carapace [SHELL]
</code></pre>
<pre><code class="language-sh"># bash
source &lt;(command _carapace)

# elvish
eval (command _carapace | slurp)

# fish
command _carapace | source

# nushell (update config.nu according to output)
command _carapace nushell

# oil
source &lt;(command _carapace)

# powershell
Set-PSReadLineOption -Colors @{ "Selection" = "`e[7m" }
Set-PSReadlineKeyHandler -Key Tab -Function MenuComplete
command _carapace | Out-String | Invoke-Expression

# tcsh
set autolist
eval `command _carapace tcsh`

# xonsh
COMPLETIONS_CONFIRM=True
exec($(command _carapace))

# zsh
source &lt;(command _carapace)
</code></pre>
<blockquote>
<p>Directly sourcing multiple completions in your shell init script increases startup time <a href="https://medium.com/@jzelinskie/please-dont-ship-binaries-with-shell-completion-as-commands-a8b1bcb8a0d0">considerably</a>. See <a href="https://github.com/rsteube/lazycomplete">lazycomplete</a> for a solution to this problem.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dashanycompletion"><a class="header" href="#dashanycompletion">DashAnyCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.DashAnyCompletion"><code>DashAnyCompletion</code></a> defines completion for any positional arguments after <code>--</code> (dash) not already defined.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).DashAnyCompletion(
    carapace.ActionValues("dAny", "dashAny"),
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dashcompletion"><a class="header" href="#dashcompletion">DashCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.DashCompletion"><code>DashCompletion</code></a> defines completion for positional arguments after <code>--</code> (dash).</p>
<pre><code class="language-go">carapace.Gen(rootCmd).DashCompletion(
    carapace.ActionValues("d1", "dash1"),
    carapace.ActionValues("d2", "dash2"),
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flagcompletion"><a class="header" href="#flagcompletion">FlagCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.FlagCompletion"><code>FlagCompletion</code></a> defines completion for flags.</p>
<pre><code class="language-go">carapace.Gen(myCmd).FlagCompletion(carapace.ActionMap{
    "flagName": carapace.ActionValues("a", "b", "c"),
})
</code></pre>
<h2 id="optional-argument"><a class="header" href="#optional-argument">Optional argument</a></h2>
<p>To mark a flag argument as optional (<code>--name=value</code>) the <a href="https://pkg.go.dev/github.com/spf13/pflag#Flag"><code>NoOptDefVal</code></a> needs to be set to anything other than empty string.</p>
<pre><code class="language-go">rootCmd.Flag("optarg").NoOptDefVal = " "
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="positionalanycompletion"><a class="header" href="#positionalanycompletion">PositionalAnyCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.PositionalAnyCompletion"><code>PositionalAnyCompletion</code></a> defines completion for any positional argument not already defined.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PositionalAnyCompletion(
    carapace.ActionValues("posAny", "positionalAny"),
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="positionalcompletion"><a class="header" href="#positionalcompletion">PositionalCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.PositionalCompletion"><code>PositionalCompletion</code></a> defines completion for positional arguments.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PositionalCompletion(
    carapace.ActionValues("pos1", "positional1"),
    carapace.ActionValues("pos2", "positional2"),
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="preinvoke"><a class="header" href="#preinvoke">PreInvoke</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.PreInvoke"><code>PreInvoke</code></a> is called after arguments are parsed and allows generic modification of an <a href="carapace/gen/../action.html">Action</a> before it is invoked.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PreInvoke(func(cmd *cobra.Command, flag *pflag.Flag, action carapace.Action) carapace.Action {
	return action.Chdir(rootCmd.Flag("chdir").Value.String())
})
</code></pre>
<p><img src="carapace/gen/./preInvoke.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prerun"><a class="header" href="#prerun">PreRun</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Carapace.PreRun"><code>PreRun</code></a> is called before arguments are parsed for the current command and allows modification of its structure.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PreRun(func(cmd *cobra.Command, args []string) {
	pluginCmd := &amp;cobra.Command{
		Use:     "plugin",
		Short:   "dynamic plugin command",
		GroupID: "plugin",
		Run:     func(cmd *cobra.Command, args []string) {},
	}

	carapace.Gen(pluginCmd).PositionalCompletion(
		carapace.ActionValues("pl1", "pluginArg1"),
	)

	cmd.AddCommand(pluginCmd)
})
</code></pre>
<p><img src="carapace/gen/./preRun.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="snippet"><a class="header" href="#snippet">Snippet</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone"><a class="header" href="#standalone">Standalone</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="action"><a class="header" href="#action">Action</a></h1>
<p>An <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action"><code>Action</code></a> indicates how to complete a flag or a positional argument.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cache"><a class="header" href="#cache">Cache</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Cache"><code>Cache</code></a> caches an <a href="carapace/action/../action.html">Action</a> for a given duration.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	return carapace.ActionValues(
		time.Now().Format("15:04:05"),
	)
}).Cache(5 * time.Second)
</code></pre>
<p><img src="carapace/action/./cache.cast" alt="" /></p>
<blockquote>
<p>Caches are implicitly assigned a unique key using <a href="https://pkg.go.dev/runtime#Caller"><code>runtime.Caller</code></a> which can change between releases.</p>
</blockquote>
<h2 id="key"><a class="header" href="#key">Key</a></h2>
<p>Additional keys like <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/cache/key#String"><code>key.String</code></a> can be passed as well.</p>
<pre><code class="language-go">carapace.ActionMultiParts("/", func(c carapace.Context) carapace.Action {
	switch len(c.Parts) {
	case 0:
		return carapace.ActionValues("one", "two").Suffix("/")
	case 1:
		return carapace.ActionCallback(func(c carapace.Context) carapace.Action {
			return carapace.ActionValues(
				time.Now().Format("15:04:05"),
			)
		}).Cache(10*time.Second, key.String(c.Parts[0]))
	default:
		return carapace.ActionValues()
	}
})
</code></pre>
<p><img src="carapace/action/./cache-key.cast" alt="" /></p>
<h2 id="location"><a class="header" href="#location">Location</a></h2>
<p>Cache is written as <code>json</code> to <a href="https://pkg.go.dev/os#UserCacheDir"><code>os.UserCacheDir</code></a> using the <a href="carapace/action/../export.html">Export</a> format.</p>
<pre><code class="language-handlebars">{{cacheDir}}/carapace/{{binary}}/{{callerChecksum}}/{{cacheChecksum}}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>ID</th><th>x</th><th>example</th></tr></thead><tbody>
<tr><td>cacheDir</td><td>os.UserCacheDir</td><td><code>~/.cache/</code></td></tr>
<tr><td>binary</td><td>binary name</td><td><code>carapace</code></td></tr>
<tr><td>callerChecksum</td><td>sha1sum using <a href="https://pkg.go.dev/runtime#Caller"><code>runtime.Caller</code></a></td><td><code>89be88b670885d3d7855c7169ad7cfd2816a6c37</code></td></tr>
<tr><td>cacheChecksum</td><td>sh1sum of given <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/cache#CacheKey"><code>CacheKeys</code></a></td><td><code>041858daaaa8b084122d4604a3223315c39edc3e</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="chdir"><a class="header" href="#chdir">Chdir</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Chdir"><code>Chdir</code></a> changes the working directory.</p>
<pre><code class="language-go">carapace.ActionFiles().Chdir("/tmp")
</code></pre>
<p><img src="carapace/action/./chdir.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chdirf"><a class="header" href="#chdirf">ChdirF</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.ChdirF"><code>ChdirF</code></a> is like <a href="carapace/action/./chdir.html">ChDir</a> but uses a function.</p>
<pre><code class="language-go">carapace.ActionFiles().ChdirF(traverse.GitWorkTree)
</code></pre>
<p><img src="carapace/action/./chdirF.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filter"><a class="header" href="#filter">Filter</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Filter"><code>Filter</code></a> filters given values.</p>
<pre><code class="language-go">carapace.ActionValuesDescribed(
	"1", "one",
	"2", "two",
	"3", "three",
	"4", "four",
).Filter("2", "4")
</code></pre>
<p><img src="carapace/action/./filter.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filterargs"><a class="header" href="#filterargs">FilterArgs</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.FilterArgs"><code>FilterArgs</code></a> filters <code>Context.Args</code>.</p>
<pre><code class="language-go">carapace.ActionValues(
	"one",
	"two",
	"three",
).FilterArgs()
</code></pre>
<p><img src="carapace/action/./filterArgs.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filterparts"><a class="header" href="#filterparts">FilterParts</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.FilterParts"><code>FilterParts</code></a> filters <code>Context.Parts</code>.</p>
<pre><code class="language-go">carapace.ActionMultiParts(",", func(c carapace.Context) carapace.Action {
	return carapace.ActionValues(
		"one",
		"two",
		"three",
	).FilterParts()
})
</code></pre>
<p><img src="carapace/action/./filterParts.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invoke"><a class="header" href="#invoke">Invoke</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Invoke"><code>Invoke</code></a> explicitly executes the <a href="carapace/action/../defaultActions/actionCallback.html">callback</a> of an <a href="carapace/action/../action.html">Action</a>.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	switch {
	case strings.HasPrefix(c.Value, "file://"):
		c.Value = strings.TrimPrefix(c.Value, "file://")
	case strings.HasPrefix("file://", c.Value):
		c.Value = ""
	default:
		return carapace.ActionValues()
	}
	return carapace.ActionFiles().Invoke(c).Prefix("file://").ToA()
})
</code></pre>
<p><img src="carapace/action/./invoke.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="list"><a class="header" href="#list">List</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.List"><code>List</code></a> creates a list with given divider.</p>
<pre><code class="language-go">carapace.ActionValues(
    "one",
    "two", 
    "three"
).List(",")
</code></pre>
<p><img src="carapace/action/./list.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multiparts"><a class="header" href="#multiparts">MultiParts</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Multiparts"><code>MultiParts</code></a> completes values splitted by given delimiter(s) separately.</p>
<pre><code class="language-go">carapace.ActionValues(
	"dir/subdir1/fileA.txt",
	"dir/subdir1/fileB.txt",
	"dir/subdir2/fileC.txt",
).MultiParts("/")
</code></pre>
<p><img src="carapace/action/./multiparts.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multipartsp"><a class="header" href="#multipartsp">MultiPartsP</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.MultiPartsP"><code>MultiPartsP</code></a> is like <a href="carapace/action/./multiParts.html">MultiParts</a> but with placeholders.</p>
<pre><code class="language-go">carapace.ActionStyledValuesDescribed(
	"keys/&lt;key&gt;", "key example", style.Default,
	"keys/&lt;key&gt;/&lt;value&gt;", "key/value example", style.Default,
	"styles/custom", "custom style", style.Of(style.Blue, style.Blink),
	"styles", "list", style.Yellow,
	"styles/&lt;style&gt;", "details", style.Default,
).MultiPartsP("/", "&lt;.*&gt;", func(placeholder string, matches map[string]string) carapace.Action {
	switch placeholder {
	case "&lt;key&gt;":
		return carapace.ActionValues("key1", "key2")
	case "&lt;style&gt;":
		return carapace.ActionStyles()
	case "&lt;value&gt;":
		switch matches["&lt;key&gt;"] {
		case "key1":
			return carapace.ActionValues("val1", "val2")
		case "key2":
			return carapace.ActionValues("val3", "val4")
		default:
			return carapace.ActionValues()
		}
	default:
		return carapace.ActionValues()
	}
})
</code></pre>
<p><img src="carapace/action/./multiPartsP.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nospace"><a class="header" href="#nospace">NoSpace</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.NoSpace"><code>NoSpace</code></a> disables space suffix for given character(s).</p>
<pre><code class="language-go">carapace.ActionValues(
	"one,",
	"two/",
	"three",
).NoSpace(',', '/')
</code></pre>
<p><img src="carapace/action/./nospace.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prefix"><a class="header" href="#prefix">Prefix</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Prefix"><code>Prefix</code></a> adds a prefix to the inserted values.</p>
<pre><code class="language-go">carapace.ActionFiles().Prefix("file://")
</code></pre>
<p><img src="carapace/action/./prefix.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="retain"><a class="header" href="#retain">Retain</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Retain"><code>Retain</code></a> retains given values.</p>
<pre><code class="language-go">carapace.ActionValuesDescribed(
	"1", "one",
	"2", "two",
	"3", "three",
	"4", "four",
).Retain("2", "4")
</code></pre>
<p><img src="carapace/action/./retain.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shift"><a class="header" href="#shift">Shift</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Shift"><code>Shift</code></a> shifts positional arguments left <code>n</code> times.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	return carapace.ActionMessage("%#v", c.Args)
}).Shift(1)
</code></pre>
<p><img src="carapace/action/./shift.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="split"><a class="header" href="#split">Split</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Split"><code>Split</code></a> splits <code>Context.Value</code> <a href="https://github.com/carapace-sh/carapace-shlex">lexicographically</a> and replaces <code>Context.Args</code> with the tokens.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	cmd := &amp;cobra.Command{}
	carapace.Gen(cmd).Standalone()
	cmd.Flags().BoolP("bool", "b", false, "bool flag")
	cmd.Flags().StringP("string", "s", "", "string flag")

	carapace.Gen(cmd).FlagCompletion(carapace.ActionMap{
		"string": carapace.ActionValues("one", "two", "three"),
	})

	carapace.Gen(cmd).PositionalCompletion(
		carapace.ActionValues("pos1", "positional1"),
		carapace.ActionFiles(),
	)

	return carapace.ActionExecute(cmd)
}).Split()
</code></pre>
<p><img src="carapace/action/./split.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="splitp"><a class="header" href="#splitp">SplitP</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.SplitP"><code>SplitP</code></a> is like <a href="carapace/action/./split.html">Split</a> but supports pipelines.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	cmd := &amp;cobra.Command{}
	carapace.Gen(cmd).Standalone()
	cmd.Flags().BoolP("bool", "b", false, "bool flag")
	cmd.Flags().StringP("string", "s", "", "string flag")

	carapace.Gen(cmd).FlagCompletion(carapace.ActionMap{
		"string": carapace.ActionValues("one", "two", "three"),
	})

	carapace.Gen(cmd).PositionalCompletion(
		carapace.ActionValues("pos1", "positional1"),
		carapace.ActionFiles(),
	)

	return carapace.ActionExecute(cmd)
}).SplitP()
</code></pre>
<p><img src="carapace/action/./splitP.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="style"><a class="header" href="#style">Style</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Style"><code>Style</code></a> sets the <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/style">style</a> for all values.</p>
<pre><code class="language-go">carapace.ActionValues(
    "one",
    "two",
).Style(style.Green)
</code></pre>
<p><img src="carapace/action/./style.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stylef"><a class="header" href="#stylef">StyleF</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.StyleF"><code>StyleF</code></a> sets the <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/style">style</a> for all values using a function.</p>
<pre><code class="language-go">carapace.ActionValues(
	"one",
	"two",
	"three",
).StyleF(func(s string, sc style.Context) string {
	switch s {
	case "one":
		return style.Green
	case "two":
		return style.Red
	default:
		return style.Default
	}
})
</code></pre>
<p><img src="carapace/action/./styleF.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="styler"><a class="header" href="#styler">StyleR</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.StyleR"><code>StyleR</code></a> sets the <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/style">style</a> for all values using a reference.</p>
<pre><code class="language-go">carapace.ActionValues(
	"one",
	"two",
).StyleR(&amp;style.Carapace.KeywordAmbiguous)
</code></pre>
<p><img src="carapace/action/./styleR.cast" alt="" /></p>
<blockquote>
<p>Using a reference avoids having to wrap the <a href="carapace/action/../action.html">Action</a> in an <a href="carapace/action/../defaultActions/actionCallback.html">ActionCallback</a> as style configurations are not yet loaded
when registering the completion.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suffix"><a class="header" href="#suffix">Suffix</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Suffix"><code>Suffix</code></a> adds a suffix to the inserted values.</p>
<pre><code class="language-go">carapace.ActionValues(
	"apple",
	"melon",
	"orange",
).Suffix("juice")
</code></pre>
<p><img src="carapace/action/./suffix.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suppress"><a class="header" href="#suppress">Suppress</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Suppress"><code>Suppress</code></a> suppresses specific error messages using regular expressions.</p>
<pre><code class="language-go">carapace.Batch(
	carapace.ActionMessage("unexpected error"),
	carapace.ActionMessage("ignored error"),
).ToA().Suppress("ignored")
</code></pre>
<p><img src="carapace/action/./suppress.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tag"><a class="header" href="#tag">Tag</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Tag"><code>Tag</code></a> sets the tag for all values.</p>
<pre><code class="language-go">carapace.ActionValues(
    "192.168.1.1",
    "127.0.0.1",
).Tag("interfaces")
</code></pre>
<p><img src="carapace/action/./tag.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tagf"><a class="header" href="#tagf">TagF</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.TagF"><code>TagF</code></a> sets the tag using a function.</p>
<pre><code class="language-go">carapace.ActionValues(
	"one.png",
	"two.gif",
	"three.txt",
	"four.md",
).StyleF(style.ForPathExt).TagF(func(s string) string {
	switch filepath.Ext(s) {
	case ".png", ".gif":
		return "images"
	case ".txt", ".md":
		return "documents"
	default:
		return ""
	}
})
</code></pre>
<p><img src="carapace/action/./tagF.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="timeout"><a class="header" href="#timeout">Timeout</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Timeout"><code>Timeout</code></a> sets the maximum duration an <a href="carapace/action/../action.html">Action</a> may take to <a href="carapace/action/./invoke.html">invoke</a>.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	time.Sleep(3*time.Second)
	return carapace.ActionValues("within timeout")
}).Timeout(2*time.Second, carapace.ActionMessage("timeout exceeded"))
</code></pre>
<p><img src="carapace/action/./timeout.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="uniquelist"><a class="header" href="#uniquelist">UniqueList</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.UniqueList"><code>UniqueList</code></a> creates a unique list with given divider.</p>
<pre><code class="language-go">carapace.ActionValues(
    "one",
    "two",
    "three"
).UniqueList(",")
</code></pre>
<p><img src="carapace/action/./uniquelist.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="uniquelistf"><a class="header" href="#uniquelistf">UniqueListF</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.UniqueListF"><code>UniqueListF</code></a> is like <a href="carapace/action/./uniqueList.html">UniqueList</a> but uses a function to transform values before filtering.</p>
<pre><code class="language-go">carapace.ActionMultiPartsN(":", 2, func(c carapace.Context) carapace.Action {
	switch len(c.Parts) {
	case 0:
		return carapace.ActionValues("one", "two", "three")
	default:
		return carapace.ActionValues("1", "2", "3")
	}
}).UniqueListF(",", func(s string) string {
	return strings.SplitN(s, ":", 2)[0]
})
</code></pre>
<p><img src="carapace/action/./uniquelistF.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unless"><a class="header" href="#unless">Unless</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Unless"><code>Unless</code></a> skips invokation if given <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/condition">condition</a> succeeds.</p>
<pre><code class="language-go">carapace.ActionValues(
	"./local",
	"~/home",
	"/abs",
	"one",
	"two",
	"three",
).Unless(condition.CompletingPath)
</code></pre>
<p><img src="carapace/action/./unless.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usage"><a class="header" href="#usage">Usage</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Usage"><code>Usage</code></a> sets the usage message.</p>
<pre><code class="language-go">carapace.ActionValues().Usage("explicit usage")
</code></pre>
<p><img src="carapace/action/./usage.cast" alt="" /></p>
<blockquote>
<p>It is implicitly set by default to <a href="https://pkg.go.dev/github.com/spf13/pflag#Flag"><code>Flag.Usage</code></a> for flag and <a href="https://pkg.go.dev/github.com/spf13/cobra#Command"><code>Command.Use</code></a> for positional arguments.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usagef"><a class="header" href="#usagef">UsageF</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invokedaction"><a class="header" href="#invokedaction">InvokedAction</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction"><code>InvokedAction</code></a> is a logical alias for an <a href="carapace/./action.html">Action</a> whose (nested) callback was <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Invoke">invoked</a> and thus contains static values (essentially this is now an <a href="carapace/./defaultActions/actionValuesDescribed.html">ActionValuesDescribed</a>).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filter-1"><a class="header" href="#filter-1">Filter</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.Filter"><code>Filter</code></a> filters values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.
E.g. completing a unique list of values in an <a href="carapace/invokedAction/../defaultActions/actionMultiParts.html">ActionMultiParts</a>:</p>
<pre><code class="language-go">carapace.ActionMultiParts(",", func(c carapace.Context) carapace.Action {
 	return carapace.ActionValues("one", "two", "three").Invoke(c).Filter(c.Parts...).ToA()
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="merge"><a class="header" href="#merge">Merge</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.Merge"><code>Merge</code></a> combines values of multiple <a href="carapace/invokedAction/../invokedAction.html">InvokedActions</a>.</p>
<pre><code class="language-go">carapace.ActionValues("one", "two").Invoke(c).Merge(carapace.ActionValues("three", "four").Invoke(c)).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prefix-1"><a class="header" href="#prefix-1">Prefix</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.Prefix"><code>Prefix</code></a> adds a prefix to all values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.</p>
<pre><code class="language-go">carapace.ActionValues("melon", "drop", "fall").Invoke(c).Prefix("water").ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="retain-1"><a class="header" href="#retain-1">Retain</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suffix-1"><a class="header" href="#suffix-1">Suffix</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.Suffix"><code>Suffix</code></a> adds a suffix to all values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.</p>
<pre><code class="language-go">ActionUsers().Invoke(c).Suffix(":").ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="toa"><a class="header" href="#toa">ToA</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.ToA"><code>ToA</code></a> casts an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a> back to <a href="carapace/invokedAction/../action.html">Action</a>.</p>
<pre><code class="language-go">ActionValues().Invoke(c).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tomultipartsa"><a class="header" href="#tomultipartsa">ToMultiPartsA</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#InvokedAction.ToMultiPartsA"><code>ToMultiPartsA</code></a> creates an <a href="carapace/invokedAction/../defaultActions/actionMultiParts.html">ActionMultiParts</a> from values containing a specific separator.
E.g. completing the contents of a zip file (<code>dir/subdir/file</code>) by each path segment separately like <a href="carapace/invokedAction/../defaultActions/actionFiles.html">ActionFiles</a>:</p>
<pre><code class="language-go">func ActionZipFileContents(file string) carapace.Action {
	return carapace.ActionCallback(func(c carapace.Context) carapace.Action {
		if reader, err := zip.OpenReader(file); err != nil {
			return carapace.ActionMessage(err.Error())
		} else {
			defer reader.Close()
			vals := make([]string, len(reader.File))
			for index, f := range reader.File {
				vals[index] = f.Name
			}
			return carapace.ActionValues(vals...).Invoke(c).ToMultiPartsA("/")
		}
	})
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="defaultactions"><a class="header" href="#defaultactions">DefaultActions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actioncallback"><a class="header" href="#actioncallback">ActionCallback</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionCallback"><code>ActionCallback</code></a> completes values with given function.
It is invoked after the arguments are parsed which enables contextual completion.</p>
<blockquote>
<p>All <a href="carapace/defaultActions/../defaultActions.html">DefaultActions</a> are implicitly wrapped in an <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionCallback"><code>ActionCallback</code></a> for performance.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	if flag := actionCmd.Flag("values"); flag.Changed {
		return carapace.ActionMessage("values flag is set to: '%v'", flag.Value.String())
	}
	return carapace.ActionMessage("values flag is not set")
})
</code></pre>
<ul>
<li><code>c.Value</code> provides access to the current (partial) value of the flag or positional argument being completed</li>
<li>return <a href="carapace/defaultActions/./actionValues.html">ActionValues</a> without arguments to silently skip completion</li>
<li>return <a href="carapace/defaultActions/./actionMessage.html">ActionMessage</a> to provide an error message (e.g. failure during invocation of an external command)</li>
<li><code>c.Args</code> provides access to the positional arguments of the current subcommand (excluding the one currently being completed)</li>
</ul>
<p><img src="carapace/defaultActions/./actionCallback.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actioncobra"><a class="header" href="#actioncobra">ActionCobra</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionCobra"><code>ActionCobra</code></a> bridges given cobra completion function.</p>
<pre><code class="language-go">carapace.ActionCobra(func(cmd *cobra.Command, args []string, toComplete string) ([]string, cobra.ShellCompDirective) {
	return []string{"one", "two"}, cobra.ShellCompDirectiveNoSpace
})
</code></pre>
<p><img src="carapace/defaultActions/./actionCobra.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actioncommands"><a class="header" href="#actioncommands">ActionCommands</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionCommands"><code>ActionCommands</code></a> completes (sub)commands of given command.</p>
<blockquote>
<p><code>Context.Args</code> is used to traverse the command tree further down.
Use <a href="carapace/defaultActions/../action/shift.html">Shift</a> to avoid this.</p>
</blockquote>
<pre><code class="language-go">carapace.Gen(helpCmd).PositionalAnyCompletion(
	carapace.ActionCommands(rootCmd),
)
</code></pre>
<p><img src="carapace/defaultActions/./actionCommands.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actiondirectories"><a class="header" href="#actiondirectories">ActionDirectories</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionDirectories"><code>ActionDirectories</code></a> completes directories.</p>
<pre><code class="language-go">carapace.ActionDirectories()
</code></pre>
<p><img src="carapace/defaultActions/./actionDirectories.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexeccommand"><a class="header" href="#actionexeccommand">ActionExecCommand</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionExecCommand"><code>ActionExecCommand</code></a> executes an external command.</p>
<pre><code class="language-go">carapace.ActionExecCommand("git", "remote")(func(output []byte) carapace.Action {
	lines := strings.Split(string(output), "\n")
	return carapace.ActionValues(lines[:len(lines)-1]...)
})
</code></pre>
<p><img src="carapace/defaultActions/./actionExecCommand.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexeccommande"><a class="header" href="#actionexeccommande">ActionExecCommandE</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionExecCommandE"><code>ActionExecCommandE</code></a> is like <a href="carapace/defaultActions/./actionExecCommand.html">ActionExecCommand</a> but with custom error handling.</p>
<pre><code class="language-go">carapace.ActionExecCommandE("false")(func(output []byte, err error) carapace.Action {
	if err != nil {
		if exitErr, ok := err.(*exec.ExitError); ok {
			return carapace.ActionMessage("failed with %v", exitErr.ExitCode())
		}
		return carapace.ActionMessage(err.Error())
	}
	return carapace.ActionValues()
})
</code></pre>
<p><img src="carapace/defaultActions/./actionExecCommandE.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexecutables"><a class="header" href="#actionexecutables">ActionExecutables</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionExecutables"><code>ActionExecutables</code></a> completes <a href="https://en.wikipedia.org/wiki/PATH_(variable)">PATH</a> executables.</p>
<pre><code class="language-go">carapace.ActionExecutables()
</code></pre>
<p><img src="carapace/defaultActions/./actionExecutables.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexecute"><a class="header" href="#actionexecute">ActionExecute</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionExecute"><code>ActionExecute</code></a> executes completion on an internal <a href="https://pkg.go.dev/github.com/spf13/cobra#Command"><code>Command</code></a>.</p>
<blockquote>
<p>Cobra commands can only be executed <strong>once</strong> so be sure each invocation uses a new instance.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	cmd := &amp;cobra.Command{
		Use: "embedded",
		CompletionOptions: cobra.CompletionOptions{
			DisableDefaultCmd: true,
		},
		Run: func(cmd *cobra.Command, args []string) {},
	}

	cmd.Flags().Bool("embedded-flag", false, "embedded flag")

	carapace.Gen(cmd).PositionalCompletion(
		carapace.ActionValues("embeddedPositional1", "embeddedP1"),
		carapace.ActionValues("embeddedPositional2", "embeddedP2"),
	)

	return carapace.ActionExecute(cmd)
})
</code></pre>
<p><img src="carapace/defaultActions/./actionExecute.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionfiles"><a class="header" href="#actionfiles">ActionFiles</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionFiles"><code>ActionFiles</code></a> completes files with optional suffix filtering.</p>
<pre><code class="language-go">carapace.ActionFiles(".md", "go.mod", "go.sum"),
</code></pre>
<p><img src="carapace/defaultActions/./actionFiles.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionimport"><a class="header" href="#actionimport">ActionImport</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionImport"><code>ActionImport</code></a> parses the json generated by <a href="carapace/defaultActions/../export.html">Export</a> and imports it as <a href="carapace/defaultActions/../action.html">Action</a>.</p>
<pre><code class="language-go">carapace.ActionImport([]byte(`
{
  "version": "unknown",
  "messages": [],
  "nospace": "",
  "usage": "",
  "values": [
    {
      "value": "first",
      "display": "first"
    },
    {
      "value": "second",
      "display": "second"
    },
    {
      "value": "third",
      "display": "third"
    }
  ]
}
`))
</code></pre>
<p><img src="carapace/defaultActions/./actionImport.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionmessage"><a class="header" href="#actionmessage">ActionMessage</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionMessage"><code>ActionMessage</code></a> shows an error message.</p>
<pre><code class="language-go">carapace.ActionMessage("example message")
</code></pre>
<blockquote>
<p>In shells other than <a href="https://elv.sh/">Elvish</a> and <a href="https://www.zsh.org/">Zsh</a> the message is integrated in the values as <code>ERR{n}</code>.</p>
</blockquote>
<p><img src="carapace/defaultActions/./actionMessage.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionmultiparts"><a class="header" href="#actionmultiparts">ActionMultiParts</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionMultiParts"><code>ActionMultiParts</code></a> completes parts of an argument separately (e.g. <code>user:group</code> from chown).
For this the <code>Context.Value</code> is split with given divider and then updated to only contain the currently completed part.
<code>Context.Parts</code> contains the preceding parts and can be used in a <code>switch</code> statement to return the corresponding <a href="carapace/defaultActions/../action.html">Action</a>.</p>
<blockquote>
<p>An empty divider splits per character, but be aware that fish will add space suffix for anything other than <code>/=@:.,</code>.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionMultiParts(":", func(c carapace.Context) carapace.Action {
	switch len(c.Parts) {
	case 0:
		return carapace.ActionValues("userA", "UserB").Invoke(c).Suffix(":").ToA()
	case 1:
		return carapace.ActionValues("groupA", "groupB")
	default:
		return carapace.ActionValues()
	}
})
</code></pre>
<ul>
<li>Values <strong>must not</strong> contain the separator as a simple <code>strings.Split()</code> is used to separate the parts.</li>
<li>It is however <strong>allowed as suffix</strong> to enable fluent tab completion (like <code>/</code> for a directory).</li>
<li>The divider is implicitly added to <a href="carapace/defaultActions/../action/noSpace.html"><code>NoSpace</code></a></li>
<li>If no suffix is added <a href="carapace/defaultActions/../action/noSpace.html"><code>NoSpace</code></a> can be used in the preceding parts to prevent a space suffix.</li>
</ul>
<p><img src="carapace/defaultActions/./actionMultiParts.cast" alt="" /></p>
<h2 id="nesting"><a class="header" href="#nesting">Nesting</a></h2>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionMultiParts"><code>ActionMultiParts</code></a> can be nested as well, e.g. completing multiple <code>KEY=VALUE</code> pairs separated by <code>,</code>.</p>
<pre><code class="language-go">carapace.ActionMultiParts(",", func(cEntries carapace.Context) carapace.Action {
	return carapace.ActionMultiParts("=", func(c carapace.Context) carapace.Action {
		switch len(c.Parts) {
		case 0:
			keys := make([]string, len(cEntries.Parts))
			for index, entry := range cEntries.Parts {
				keys[index] = strings.Split(entry, "=")[0]
			}
			return carapace.ActionValues("FILE", "DIRECTORY", "VALUE").Filter(keys...).Suffix("=")
		case 1:
			switch c.Parts[0] {
			case "FILE":
				return carapace.ActionFiles("").NoSpace()
			case "DIRECTORY":
				return carapace.ActionDirectories().NoSpace()
			case "VALUE":
				return carapace.ActionValues("one", "two", "three").NoSpace()
			default:
				return carapace.ActionValues()

			}
		default:
			return carapace.ActionValues()
		}
	})
})
</code></pre>
<p><img src="carapace/defaultActions/./actionMultiParts-nested.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionmultipartsn"><a class="header" href="#actionmultipartsn">ActionMultiPartsN</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.MultipartsN"><code>ActionMultiPartsN</code></a> is like <a href="carapace/defaultActions/./actionMultiParts.html">ActionMultiParts</a> but limits the number of parts to <code>n</code>.</p>
<pre><code class="language-go">carapace.ActionMultiPartsN("=", 2, func(c carapace.Context) carapace.Action {
	switch len(c.Parts) {
	case 0:
		return carapace.ActionValues("one", "two").Suffix("=")
	case 1:
		return carapace.ActionMultiParts("=", func(c carapace.Context) carapace.Action {
			switch len(c.Parts) {
			case 0:
				return carapace.ActionValues("three", "four").Suffix("=")
			case 1:
				return carapace.ActionValues("five", "six")
			default:
				return carapace.ActionValues()
			}
		})
	default:
		return carapace.ActionMessage("should never happen")
	}
})
</code></pre>
<p><img src="carapace/defaultActions/./actionMultiPartsN.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionpositional"><a class="header" href="#actionpositional">ActionPositional</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionPositional"><code>ActionPositional</code></a> completes positional arguments for given command ignoring <code>--</code> (dash).</p>
<pre><code class="language-go">carapace.Gen(cmd).DashAnyCompletion(
	carapace.ActionPositional(cmd),
)
</code></pre>
<blockquote>
<p>It resets <code>Context.Args</code> to contain the full arguments and is meant as a means to continue positional completion on dash positions.</p>
</blockquote>
<p><img src="carapace/defaultActions/./actionPositional.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyleconfig"><a class="header" href="#actionstyleconfig">ActionStyleConfig</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyledvalues"><a class="header" href="#actionstyledvalues">ActionStyledValues</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionStyledValues"><code>ActionStyledValues</code></a> is like <a href="carapace/defaultActions/./actionValues.html">ActionValues</a> but accepts an additional <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/style">style</a>.</p>
<pre><code class="language-go">carapace.ActionStyledValues(
	"first", style.Default,
	"second", style.Blue,
	"third", style.Of(style.BgBrightBlack, style.Magenta, style.Bold),
)
</code></pre>
<p><img src="carapace/defaultActions/./actionStyledValues.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyledvaluesdescribed"><a class="header" href="#actionstyledvaluesdescribed">ActionStyledValuesDescribed</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionStyledValuesDescribed"><code>ActionStyledValuesDescribed</code></a> is like <a href="carapace/defaultActions/./actionValuesDescribed.html">ActionValuesDescribed</a> but accepts an additional <a href="https://pkg.go.dev/github.com/carapace-sh/carapace/pkg/style">style</a>.</p>
<pre><code class="language-go">carapace.ActionStyledValuesDescribed(
	"first", "description of first", style.Blink,
	"second", "description of second", style.Of("color210", style.Underlined),
	"third", "description of third", style.Of("#112233", style.Italic),
)
</code></pre>
<p><img src="carapace/defaultActions/./actionStyledValuesDescribed.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyles"><a class="header" href="#actionstyles">ActionStyles</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionStyles"><code>ActionStyles</code></a> completes styles.</p>
<p><img src="carapace/defaultActions/./actionStyles.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionvalues"><a class="header" href="#actionvalues">ActionValues</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionValues"><code>ActionValues</code></a> completes values.</p>
<pre><code class="language-go">carapace.ActionValues(
	"first",
	"second",
	"third"
)
</code></pre>
<p><img src="carapace/defaultActions/./actionValues.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionvaluesdescribed"><a class="header" href="#actionvaluesdescribed">ActionValuesDescribed</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#ActionValuesDescribed"><code>ActionValuesDescribed</code></a> completes values with a description.</p>
<pre><code class="language-go">carapace.ActionValuesDescribed(
	"first", "description of first",
	"second", "description of second",
	"third", "description of third",
)
</code></pre>
<p><img src="carapace/defaultActions/./actionValuesDescribed.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="customactions"><a class="header" href="#customactions">CustomActions</a></h1>
<p>Custom Actions can be created by using a function that returns <code>carapace.Action</code>. A range of these can be found at <a href="https://pkg.go.dev/github.com/carapace-sh/carapace-bin/pkg/actions">carapace-bin</a>.</p>
<pre><code class="language-go">type ExampleOpts struct {
	Static bool
}

//  ActionExample(ExampleOpts{Static: true})
func ActionExample(opts ExampleOpts) carapace.Action {
	return carapace.ActionCallback(func(c carapace.Context) carapace.Action {
		if opts.Static {
			return carapace.ActionValues("a", "b")
		}
		if strings.HasPrefix(c.Value, "file://") {
			return carapace.ActionFiles().Invoke(c).Prefix("file://").ToA()
		}
		return carapace.ActionValues()
	})
}
</code></pre>
<blockquote>
<p>Unless static values are returned the code should be wrapped in a <a href="carapace/defaultActions/actionCallback.html">callback</a> or the code would be executed at program start (and slow it down considerably).
It is also mandatory when accessing the commands flag values as the callback function is invoked after these are parsed.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="context"><a class="header" href="#context">Context</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Context"><code>Context</code></a> provides information during completion.</p>
<pre><code class="language-go">type Context struct {
	Value string
	Args []string
	Parts []string
	Env []string
	Dir string
}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody>
<tr><td>Value</td><td>current value being completed</td></tr>
<tr><td>Args</td><td>positional arguments of current (sub)command</td></tr>
<tr><td>Parts</td><td>splitted Value during an <a href="carapace/./defaultActions/actionMultiParts.html">ActionMultiParts</a></td></tr>
<tr><td>Dir</td><td>working directory</td></tr>
</tbody></table>
</div>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>Default with flag parsing enabled.</p>
<pre><code class="language-sh">command pos1 --flag1 pos2 --f&lt;TAB&gt;
# Value: --f
# Args: [pos1, pos2]
</code></pre>
<p>After encountering <code>--</code> (dash) further flag parsing is disabled and <code>Context.Args</code> is reset to only contain dash arguments.</p>
<pre><code class="language-sh">command pos1 --flag1 pos2 -- dash1 &lt;TAB&gt;
# Value:
# Args: [dash1]
</code></pre>
<p>With <a href="https://pkg.go.dev/github.com/spf13/cobra#Command"><code>Command.DisableFlagParsing</code></a> to <code>true</code> all arguments are handled as positional.</p>
<pre><code class="language-sh">command pos1 --flag1 pos2 -- dash1 d&lt;TAB&gt;
# Value: d
# Args: [pos1, --flag1, pos2, --, dash1]
</code></pre>
<p>With <a href="https://pkg.go.dev/github.com/spf13/pflag#SetInterspersed"><code>SetInterspersed</code></a> to <code>false</code> flag parsing is disabled after encountering the first positional argument.</p>
<pre><code class="language-sh">command --flag1 flagArg1 pos1 -- dash1 --flag2 d&lt;TAB&gt;
# Value: d
# Args: [pos1, --, dash1, --flag2]
</code></pre>
<p><a href="carapace/./defaultActions/actionMultiParts.html">ActionMultiParts</a> is a special case where <code>Context.Parts</code> is filled with the splitted <code>Context.Value</code>.</p>
<pre><code class="language-go">ActionValues("part1", "part2", "part3").UniqueList(",")
</code></pre>
<pre><code class="language-sh">command pos1 part1,part2,p&lt;TAB&gt;
# Value: p
# Args: [pos1]
# Parts: [part1, part2]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="abs"><a class="header" href="#abs">Abs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command"><a class="header" href="#command">Command</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="envsubst"><a class="header" href="#envsubst">Envsubst</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getenv"><a class="header" href="#getenv">GetEnv</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lookupenv"><a class="header" href="#lookupenv">LookupEnv</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setenv"><a class="header" href="#setenv">SetEnv</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="batch"><a class="header" href="#batch">Batch</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Batch"><code>Batch</code></a> bundles <a href="carapace/./defaultActions/actionCallback.html">callback actions</a> so they can be <a href="https://pkg.go.dev/github.com/carapace-sh/carapace#Action.Invoke">invoked</a> concurrently using goroutines.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	return carapace.Batch(
		carapace.ActionValues("A", "B"),
		carapace.ActionValues("C", "D"),
		carapace.ActionValues("E", "F"),
	).Invoke(c).Merge().ToA()
})
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invoke-1"><a class="header" href="#invoke-1">Invoke</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="toa-1"><a class="header" href="#toa-1">ToA</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invokedbatch"><a class="header" href="#invokedbatch">InvokedBatch</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="merge-1"><a class="header" href="#merge-1">Merge</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="export"><a class="header" href="#export">Export</a></h1>
<p><a href="https://pkg.go.dev/github.com/carapace-sh/carapace/internal/export#Export"><code>Export</code></a> provides a <code>json</code> representation of an <a href="carapace/./invokedAction.html">InvokedAction</a>.
It is used to exchange completions between commands with <a href="carapace/./defaultActions/actionImport.html">ActionImport</a> as well as for <a href="carapace/./action/cache.html">Cache</a>.</p>
<pre><code class="language-go">type Export struct {
	version  string   `json:"version"`
	messages []string `json:"messages"`
	nospace  string   `json:"nospace"`
	usage    string   `json:"usage"`
	values   []struct {
		value       string `json:"value"`
		display     string `json:"display"`
		description string `json:"description,omitempty"`
		style       string `json:"style,omitempty"`
		tag         string `json:"tag,omitempty"`
	} `json:"values"`
}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody>
<tr><td>version</td><td>version of <code>carapace</code> being used</td></tr>
<tr><td>messages</td><td>list of error messages</td></tr>
<tr><td>nospace</td><td>character suffixes that prevent space suffix (<code>*</code> matches all)</td></tr>
<tr><td>usage</td><td>usage message</td></tr>
<tr><td>values</td><td>list of completion values</td></tr>
<tr><td>-</td><td></td></tr>
<tr><td>value</td><td>value to insert</td></tr>
<tr><td>display</td><td>value to display during completion</td></tr>
<tr><td>description</td><td>description of the value</td></tr>
<tr><td>style</td><td>style of the value</td></tr>
<tr><td>tag</td><td>tag of the value</td></tr>
</tbody></table>
</div>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-sh">example _carapace export example m&lt;TAB&gt;
</code></pre>
<pre><code class="language-json">{
  "version": "unknown",
  "messages": [],
  "nospace": "",
  "usage": "",
  "values": [
    {
      "value": "modifier",
      "display": "modifier",
      "description": "modifier example",
      "style": "yellow",
      "tag": "modifier commands"
    },
    {
      "value": "multiparts",
      "display": "multiparts",
      "description": "multiparts example",
      "tag": "other commands"
    }
  ]
}
</code></pre>
<p><img src="carapace/./export.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-1"><a class="header" href="#command-1">Command</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="group"><a class="header" href="#group">Group</a></h1>
<p><a href="https://github.com/spf13/cobra/blob/main/site/content/user_guide.md#grouping-commands-in-help">Command Groups</a> are implicitly used as <code>tag</code> for commands.</p>
<pre><code class="language-go">groupCmd.AddGroup(
	&amp;cobra.Group{ID: "main", Title: "Main Commands"},
	&amp;cobra.Group{ID: "setup", Title: "Setup Commands"},
)

run := func(cmd *cobra.Command, args []string) {}
groupCmd.AddCommand(
	&amp;cobra.Command{Use: "sub1", GroupID: "main", Run: run},
	&amp;cobra.Command{Use: "sub2", GroupID: "main", Run: run},
	&amp;cobra.Command{Use: "sub3", GroupID: "setup", Run: run},
	&amp;cobra.Command{Use: "sub4", GroupID: "setup", Run: run},
	&amp;cobra.Command{Use: "sub5", Run: run},
)
</code></pre>
<p><img src="carapace/command/./group.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone-1"><a class="header" href="#standalone-1">Standalone</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="carapace-parse"><a class="header" href="#carapace-parse">carapace-parse</a></h1>
<p><a href="https://github.com/carapace-sh/carapace-bin/tree/master/cmd/carapace-parse">carapace-parse</a> is a helper tool that uses regex to parse gnu help pages. Due to strong inconsistencies between these the results may differ but generally give a good head start.</p>
<pre><code class="language-sh">docker node update --help | carapace-parse -n update -p node -s "Update a node"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pflag"><a class="header" href="#pflag">pflag</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sandbox"><a class="header" href="#sandbox">Sandbox</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="clearcache"><a class="header" href="#clearcache">ClearCache</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="env"><a class="header" href="#env">Env</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="files"><a class="header" href="#files">Files</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="env-1"><a class="header" href="#env-1">Env</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="newcontext"><a class="header" href="#newcontext">NewContext</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reply"><a class="header" href="#reply">Reply</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="with"><a class="header" href="#with">With</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="run"><a class="header" href="#run">Run</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expect"><a class="header" href="#expect">Expect</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expectnot"><a class="header" href="#expectnot">ExpectNot</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="output"><a class="header" href="#output">Output</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development"><a class="header" href="#development">development</a></h1>
<blockquote>
<p>WIP</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="additional-information"><a class="header" href="#additional-information">Additional Information</a></h1>
<p>Additional information can be found at:</p>
<ul>
<li>Bash: <a href="https://iridakos.com/programming/2018/03/01/bash-programmable-completion-tutorial">bash-programmable-completion-tutorial</a> and <a href="https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html#Programmable-Completion-Builtins">Programmable-Completion-Builtins</a></li>
<li>Elvish: <a href="https://zzamboni.org/post/using-and-writing-completions-in-elvish/">using-and-writing-completions-in-elvish</a> and <a href="https://elv.sh/ref/edit.html#argument-completer">argument-completer</a></li>
<li>Fish: <a href="https://github.com/fish-shell/fish-shell/tree/master/share/functions">fish-shell/share/functions</a> and <a href="https://fishshell.com/docs/current/#writing-your-own-completions">writing your own completions</a></li>
<li>Powershell: <a href="https://adamtheautomator.com/powershell-parameters-argumentcompleter/">Dynamic Tab Completion</a> and <a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/register-argumentcompleter">Register-ArgumentCompleter</a></li>
<li>Tcsh: <a href="https://www.ibm.com/docs/en/zos/2.3.0?topic=shell-complete-built-in-command-tcsh-list-completions">complete built-in command for tcsh</a></li>
<li>Xonsh: <a href="https://xon.sh/tutorial_completers.html">Programmable Tab-Completion</a> and <a href="https://github.com/xonsh/xonsh/blob/master/xonsh/completers/tools.py">RichCompletion(str)</a></li>
<li>Zsh: <a href="https://github.com/zsh-users/zsh-completions/blob/master/zsh-completions-howto.org#functions-for-performing-complex-completions-of-single-words">zsh-completions-howto</a> and <a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Completion-System">Completion-System</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shells"><a class="header" href="#shells">Shells</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bash"><a class="header" href="#bash">Bash</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''\'''</code> <code>"\""</code></td></tr>
<tr><td>escape characer</td><td><code>\</code></td></tr>
<tr><td>output capture</td><td><code>$()</code> `` <code>&lt;()</code></td></tr>
<tr><td>line continuation</td><td><code>\</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="elvish"><a class="header" href="#elvish">Elvish</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''''</code> <code>"\""</code></td></tr>
<tr><td>escape characer</td><td>none</td></tr>
<tr><td>output capture</td><td><code>()</code></td></tr>
<tr><td>line continuation</td><td><code>^</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="fish"><a class="header" href="#fish">Fish</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''</code> <code>""</code></td></tr>
<tr><td>escape characer</td><td><code>\</code></td></tr>
<tr><td>output capture</td><td><code>()</code></td></tr>
<tr><td>line continuation</td><td><code>\</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ion"><a class="header" href="#ion">Ion</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nushell"><a class="header" href="#nushell">Nushell</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oil"><a class="header" href="#oil">Oil</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="powershell"><a class="header" href="#powershell">Powershell</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tcsh"><a class="header" href="#tcsh">Tcsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="xonsh"><a class="header" href="#xonsh">Xonsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zsh"><a class="header" href="#zsh">Zsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p>Since callbacks are simply invocations of the program they can be tested directly.</p>
<pre><code class="language-sh">example _carapace bash example condition --required ''
valid
invalid

example _carapace elvish example condition --required ''
[{"Value":"valid","Display":"valid"},{"Value":"invalid","Display":"invalid"}]

example _carapace fish example condition --required ''
valid
invalid

example _carapace powershell example condition --required ''
[{"CompletionText":"valid","ListItemText":"valid","ToolTip":" "},{"CompletionText":"invalid","ListItemText":"invalid","ToolTip":" "}]

example _carapace xonsh example condition --required ''
[{"Value":"valid","Display":"valid","Description":""},{"Value":"invalid","Display":"invalid","Description":""}]

example _carapace zsh example condition --required ''
valid   valid
invalid invalid
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asciinema"><a class="header" href="#asciinema">Asciinema</a></h1>
<p>Asciicasts are recorded within a resized tmux window for consistency.</p>
<pre><code class="language-sh">tmux
tmux resize-window -x 108 -y 24
</code></pre>
<p>They can be embedded using the image syntax.</p>
<pre><code class="language-md">![](./recording.cast)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="asciinema/asciinema-player.min.js"></script>
        <script src="asciinema/load.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>